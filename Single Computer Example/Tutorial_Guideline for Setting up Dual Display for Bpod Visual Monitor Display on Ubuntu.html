<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.1.1 (452253)"/><meta name="keywords" content="instructions, tutorials"/><meta name="author" content="Kachi O"/><meta name="created" content="2016-07-27 14:20:10 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2016-07-27 15:11:47 +0000"/><title>Tutorial/Guideline for Setting up Dual Display for Bpod Visual Monitor Display on Ubuntu</title></head><body>
<div>Originally figured out by Anqi Zhang (Zador Lab) - April 2016</div>
<div>Updated by Kachi Odoemene (Churchland Lab) - July 2016</div>
<div><br/></div>
<div>Tested on Ubuntu 14.04</div>
<div>Psychtoolbox 3.11.</div>
<div><br/></div>
<div>This is a tutorial for configuring an Ubuntu machine to have two separate screens: one screen for the experimenter/user interface and the second screen for subject. As it turns out creating separate screens on Ubuntu is not a trivial exercise, so the user is encouraged to exercise patience. Alternatively, it is much easier to use separate screens on Windows or Mac. </div>
<div><br/></div>
<div>Make sure that computer has a decent graphics card for your application. See <a href="http://psychtoolbox.org/requirements/">Psychtoolbox system requirements</a> for guidelines on choosing graphics card. For full functionality of Psychtoolbox and it’s required dependencies, follow the instructions for installing Psychtoolbox on Linux as written here: <a href="http://psychtoolbox.org/download/#Linux">http://psychtoolbox.org/download/#Linux</a></div>
<div><br/></div>
<div>
<ol style="font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
<li>Create an X config file.
<ul>
<li>Reboot machine into recovery mode.  This step may be tricky depending on how Ubuntu was installed on your machine. Here are some suggestions incase you have some issues booting into recovery mode. 
<ul>
<li>[optional] Install Ubuntu boot-repair. This will check your system to make sure there is nothing wrong with the boot configuration. Reboot machine.</li>
<li>At the Ubuntu start up, press 'e' to edit the grub command line . With arrow key go down to the line that starts with 'linux' and add the word ‘nomodeset’  to the end of the line. If that doesn't work, also remove 'quiet' from the word list and add ‘recovery’. Reboot.  </li>
<li>If these fail, see Google. </li>
</ul>
</li>
<li>Select  “drop down root shell” and a command line interface will show up. </li>
<li>Remount drive as read/write<span style="font-family: Calibri, sans-serif;">:</span>
<ul>
<li>Type: <span style="font-family: 'Courier New';">mount –o remount rw /</span></li>
<li>Next, create xorg.conf file. Type: <span style="font-family: 'Courier New';">X –configure</span>
<ul>
<li>this will create a file “xorg.conf.new” in the current directory</li>
</ul>
</li>
<li>Copy newly created X config file to a new location. Type: <span style="font-family: 'Courier New';">cp /root/xorg.conf.new /etc/X11/xorg.conf</span></li>
<li>Leave root shell. Type: <span style="font-family: 'Courier New';">exit</span></li>
</ul>
</li>
</ul>
</li>
<li>Resume with boot</li>
<li>Edit X config file located in /etc/X11/xorg.conf. See example xorg.conf file below
<ul>
<li>Add a line to the first section at the top to specify new screen and position of the new screen (e.g. RightOf “Screen0”)</li>
<li>Add a new “Device" section
<ul>
<li>copy and paste the contents of the existing Device section.</li>
<li>Use the same graphics card BusID, rename the identifier, and specify the output port (e.g. “HDMI1”, “VGA1”, “DP1”, or “DVI1”) </li>
<li>For intel drivers, add the line: <span style="font-family: 'Courier New';">Option “TripleBuffer” “off"</span></li>
<li>To find output port connector names see <a target="_blank" href="https://email.cshl.edu/owa/redir.aspx?C=ticYlzFjukCsBVI6OxtSdHsrYl2lu9MIyxgUie0iwJr5g7rVKbn2tmDszUCpDVAMxGzzOUsrtsA.&amp;URL=http%3a%2f%2fblog.timmattison.com%2farchives%2f2012%2f01%2f16%2fhow-to-set-up-multi-head-x-in-debian-using-nvidia-cards%2f">http://blog.timmattison.com/archives/2012/01/16/how-to-set-up-multi-head-x-in-debian-using-nvidia-cards/</a></li>
</ul>
</li>
<li>Add a new “Screen” section
<ul>
<li>basically copy existing screen but give new names — points to new “device”</li>
</ul>
</li>
</ul>
</li>
<li>Restart machine. 
<ul>
<li>after you restart, the conf file you just created might be renamed as xorg.conf.[date]. Rename the file as “xorg.conf" </li>
</ul>
</li>
<li>Test with Psychtoolbox
<ul>
<li>In Matlab type: Screen(‘Screens’)</li>
<li>The output should be: [ 0 1] to indicate multiple screens</li>
</ul>
</li>
</ol>
</div>
</body></html>